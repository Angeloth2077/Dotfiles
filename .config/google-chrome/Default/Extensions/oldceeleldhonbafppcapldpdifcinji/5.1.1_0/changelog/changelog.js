let visibilityTracked=!1,counterInterval=null;const TWO_DAYS=1728e5,storageController=StorageController.create(),MESSAGES={TIMER_LABEL_HOUR_SINGULAR:i18nManager.getMessage("changelog2020TimerHourSingular"),TIMER_LABEL_HOUR_PLURAL:i18nManager.getMessage("changelog2020TimerHourPlural"),TIMER_LABEL_MINUTE_SINGULAR:i18nManager.getMessage("changelog2020TimerMinuteSingular"),TIMER_LABEL_MINUTE_PLURAL:i18nManager.getMessage("changelog2020TimerMinutePlural"),TIMER_LABEL_SECOND_SINGULAR:i18nManager.getMessage("changelog2020TimerSecondSingular"),TIMER_LABEL_SECOND_PLURAL:i18nManager.getMessage("changelog2020TimerSecondPlural")};function setDiscount(e){Array.from(document.querySelectorAll(".premium-tag")).forEach((t=>{t.textContent=i18nManager.getMessage("changelog2020FeaturePremiumTag",String(e))})),Array.from(document.querySelectorAll(".upgrade-link")).forEach((t=>{t.textContent=i18nManager.getMessage("changelog2020FeatureUpgrade2Link",String(e))})),Array.from(document.querySelectorAll(".try-it-link")).forEach((t=>{t.textContent=i18nManager.getMessage("changelog2021FeatureSectionTryIt",String(e))})),Array.from(document.querySelectorAll(".header-discount")).forEach((t=>{t.textContent=String(e)}))}function startCounter(){const e=document.getElementById("countdown"),t=document.getElementById("timer__labels__label--hour"),n=document.getElementById("timer__labels__label--minute"),r=document.getElementById("timer__labels__label--second");storageController.onReady((()=>{storageController.startChangelogCoupon();const o=storageController.getActiveCoupon();o&&o.percent&&setDiscount(o.percent),counterInterval&&window.clearInterval(counterInterval),counterInterval=window.setInterval((()=>{const o=storageController.getActiveCoupon(),a=document.createElement("div"),l=getCountdown(o&&o.expires||0),i=l.split(/:|/);i.forEach(((e,t)=>{const n=document.createElement("span");if(n.className="navigation__count-down__diget",n.textContent=e,a.appendChild(n),t%2==1&&t<i.length-1){const e=document.createElement("span");e.className="navigation__count-down__divider",e.textContent=":",a.appendChild(e)}}));const c=l.split(":");t.textContent=1===parseInt(c[0])?MESSAGES.TIMER_LABEL_HOUR_SINGULAR:MESSAGES.TIMER_LABEL_HOUR_PLURAL,n.textContent=1===parseInt(c[1])?MESSAGES.TIMER_LABEL_MINUTE_SINGULAR:MESSAGES.TIMER_LABEL_MINUTE_PLURAL,r.textContent=1===parseInt(c[2])?MESSAGES.TIMER_LABEL_SECOND_SINGULAR:MESSAGES.TIMER_LABEL_SECOND_PLURAL,e.innerHTML=a.innerHTML}),1e3)}))}function checkForVisibility(){const e=document.querySelector("#favicon");window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)").matches&&(e.href=e.href.replace("-color","-white")),"visible"!==document.visibilityState||visibilityTracked||(visibilityTracked=!0,Tracker.trackEvent("Action","changelog:seen"),startCounter(),e.href=e.href.replace("_notification",""))}setDiscount(20),document.addEventListener("visibilitychange",(()=>checkForVisibility())),checkForVisibility(),storageController.onReady((()=>{const{geoIpCountry:e,geoIpLanguages:t,motherTongue:n}=storageController.getSettings(),{isThunderbirdUser:r}=storageController.getStatistics();e&&["de","li","lu","gb","at","nl","be","ch","fr","ie","pl","dk","no","it","es","pt","cz"].includes(e.toLowerCase())&&(document.querySelector(".made-in-eu").style.display="block");const o=BrowserDetector.isFirefox()||"Linux"===BrowserDetector.getOS()||r,a=document.getElementById("style-video--en"),l=document.getElementById("style-video--de"),i=document.getElementById("style-video--es"),c=document.getElementById("french"),s=navigator.language.startsWith("fr")||["FR","CM","CD","MA"].includes(e)||"BE"===e&&!navigator.language.startsWith("nl")&&!navigator.language.startsWith("de")||"CH"===e&&!navigator.language.startsWith("it")&&!navigator.language.startsWith("de")||"fr"===String(n).toLowerCase(),g=navigator.language.startsWith("de")||["DE","AT"].includes(e)||"de"===String(n).toLowerCase(),d=navigator.language.startsWith("es")||["MX","ES","CO","CL","CR","AR","EC","PE","GT","PR"].includes(e)||"es"===String(n).toLowerCase();if("Mac"===BrowserDetector.getOS()&&document.body.classList.add("mac-user"),g&&document.body.classList.add("de-user"),s){document.body.classList.add("fr-user");const e=document.getElementById("style");null==e||e.remove()}else g?(null==a||a.remove(),null==i||i.remove()):d?(null==a||a.remove(),null==l||l.remove()):(null==l||l.remove(),null==i||i.remove());if(Array.from(navigator.languages).some((e=>e.startsWith("fr")))||null==c||c.remove(),o)document.body.classList.add("thunderbird-user");else{const e=document.getElementById("thunderbird");null==e||e.remove()}})),Array.from(document.querySelectorAll("a[href='upgrade']")).forEach((e=>{e.addEventListener("click",(()=>{Tracker.trackEvent("Action","changelog:click_upgrade")}))}));let scrollTracked=!1;window.addEventListener("scroll",(()=>{!scrollTracked&&document.scrollingElement&&document.scrollingElement.scrollTop>600&&(scrollTracked=!0,Tracker.trackEvent("Action","changelog:scrolled"));const e=document.getElementById("changelog-navigation-top"),t=window.scrollY||window.pageYOffset;e&&(0===t?e.classList.remove("sticky"):t>0&&!e.classList.contains("sticky")&&e.classList.add("sticky"))})),translateSection(document.documentElement);